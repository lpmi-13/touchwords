var width=screen.width,height=screen.height,portrait=checkOrientation(width,height);function logAllThings(){void 0,void 0,void 0,void 0}function checkOrientation(e,t){return e<t}var emitter,bonusEmitter,displaySpelling,wordToCorrect,promptText,inputRectangle,heightMultiplier=portrait?.7:.75,game=new Phaser.Game(.8*width,height*heightMultiplier,Phaser.CANVAS,"gameDiv",{preload:preload,create:create,update:update});function preload(){void 0}var scoreText,timeLabel,livesPool,wordPool,scorePool,bonusScorePool,deleteButton,heartPool,level=0,score=0,progress=0,clickedArray=[],consonantArray=["b","c","d","f","g","h","j","k","l","m","n","p","q","r","s","t","v","w","x","z"],vowelArray=["a","e","i","o","u"];function create(){game.levelData=JSON.parse(game.cache.getText("leveldata"));var a=game.levelData.levelVariables[level];void 0;var e=game.add.tileSprite(0,0,a.backgroundWidth,a.backgroundHeight,a.background),t=game.world.width/a.backgroundWidth,o=game.world.height/a.backgroundHeight;logAllThings(),e.tileScale.x=t,e.tileScale.y=o,scoreText=game.add.text(5,5,"Points: "+score,{font:"2.8em Georgia",fill:"#0095DD"}),heartPool=game.add.group();for(var r=4;1<r;r--)heartSprite=game.add.sprite(game.world.width-20*r,5,"heart"),heartSprite.scale.set(.075,.075),heartPool.add(heartSprite);var l=heartPool.countLiving();game.physics.startSystem(Phaser.Physics.ARCADE),(scorePool=game.add.group()).setAll("anchor.x",.5),scorePool.setAll("anchor.y",.5),scorePool.enableBody=!0,scorePool.physicsBodytype=Phaser.Physics.ARCADE,(wordPool=game.add.group()).enableBody=!0,wordPool.physicsBodytype=Phaser.Physics.ARCADE,wordPool.setAll("anchor.x",.5),wordPool.setAll("anchor.y",.5),wordPool.setAll("outOfBoundsKill",!0),wordPool.setAll("checkWorldbounds",!0);var n=[],s=a.verbs,i=Object.keys(a.verbs),d=i.length;function g(){return game.rnd.integerInRange(0,d-1)}void 0,void 0,game.physics.arcade.checkCollision.down=!1;game.time.events.loop(a.timeToSpawn,function(){var e=function(){for(var e=g();-1<n.indexOf(e);)e=g();return e}(),t=game.add.text(game.world.randomX,game.world.height,i[e],{font:"3em Arial Black",fill:"#c51b7d"},wordPool);return void 0,void 0,void 0,n.push(e),10<n.length&&n.shift(),t.stroke="d377ae",t.strokeThickness=3,t.setShadow(2,2,"#333333",2,!0,!1),t.data={regular:s[i[e]].regular,answer:s[i[e]].correction},t.inputEnabled=!0,t.events.onInputDown.add(c,this),t.body.velocity.setTo(game.rnd.integerInRange(a.velocityXlower,a.velocityXhigher),game.rnd.integerInRange(a.velocityYlower,a.velocityYhigher)),t.body.collideWorldBounds=!0,t.body.bounce.set(1),t},this);function c(e,t){e.data.regular?(game.camera.flash(16711680,300),game.camera.shake(.05,300),l--,heartPool.getFirstAlive().kill(),l||function(){game.camera.fade(0,1500,!0),wordPool.callAll("kill"),game.time.events.add(1500,p,this)}()):(clickedArray.push({text:e.text,answer:e.data.answer}),function(e){emitter.x=e.x,emitter.y=e.y,emitter.start(!0,1e3,null,5)}(e),function(e){var t=scorePool.getFirstExists();if(t)var a=t.reset(e.x,e.y);else a=game.add.text(e.x,e.y,"+10",{font:"3em Georgia",fill:"#0095DD"},scorePool);a.body.velocity.setTo(0,-200)}(e),score+=10,scoreText.setText("Points: "+score),(progress+=1)==a.progressTotal&&function(){wordPool.callAll("kill"),levelUpText=portrait?game.add.text(game.world.centerX,-150,"You passed the level!!!",{font:"2.5em Georgia",fill:"#0095DD"}):game.add.text(game.world.centerX,-150,"You passed the level!!!",{font:"8em Georgia",fill:"#0095DD"});levelUpText.anchor.set(.5);var e=game.add.tween(levelUpText).to({y:game.world.centerY},4e3,Phaser.Easing.Bounce.Out,!0);game.time.events.pause(),e.onComplete.add(m,this)}(),e.kill())}function m(){game.camera.fade(0,1500,!0),game.camera.onFadeComplete.add(h,this)}function h(){game.time.events.resume(),game.state.start("bonus")}function p(){game.state.start("lose")}(emitter=game.add.emitter(0,0,100)).makeParticles("diamond"),emitter.gravity=200,game.scale.refresh()}function update(){}var bootState={preload:function(){game.load.image("preloader","/assets/images/loading.png"),game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0},create:function(){game.stage.backgroundColor="#000000",game.state.start("load")}},loadState={preload:function(){void 0,game.load.image("logo","assets/images/logo.jpg"),game.load.text("leveldata","js/levels.json"),game.load.image("heart","assets/images/Heart.png"),game.load.image("button","assets/images/roundedColoredButton.png"),game.load.image("deleteButton","assets/images/deleteButton.png"),game.load.bitmapFont("digitalFont","assets/fonts/font.png","assets/fonts/font.fnt"),game.load.image("level1Background","assets/images/voodoo_cactus_island_scaled.jpg"),game.load.image("level2Background","assets/images/fishbgexp_scaled.jpg"),game.load.image("level3Background","assets/images/cloudsinthedesert_scaled.jpg"),game.load.image("diamond","assets/images/diamond.png");var e=game.add.sprite(0,game.world.height-50,"preloader"),t=game.world.width/387;e.scale.setTo(t,1),game.add.text(game.world.centerX,game.world.height-130,"Loading...",{fill:"white"}).anchor.setTo(.5),game.load.setPreloadSprite(e)},loadUpdate:function(){void 0;var e=game.load.progress;void 0,100===e&&this.loadComplete()},loadComplete:function(){game.state.start("splashScreen")}},splashScreenState={preload:function(){preload()},create:function(){if(void 0,game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.scale.refresh(),portrait){(a=game.add.sprite(game.world.centerX,game.world.centerY/2,"logo")).anchor.set(.5);var e=game.world.width/296,t=game.world.height/207/2;a.scale.setTo(e,t)}else{var a;(a=game.add.sprite(game.world.centerX,game.world.centerY/2,"logo")).anchor.set(.5)}var o=game.add.text(game.world.centerX,game.world.height-35,"touch the screen to start",{font:"1.6em Georgia",fill:"#0095DD"});o.anchor.set(.5),o.alpha=1,game.add.tween(o).to({alpha:.25},300,"Linear",!0,1,-1).yoyo(!0,300),game.input.onTap.addOnce(this.start,this)},start:function(){game.state.start("instructions")}},instructionState={preload:function(){preload()},create:function(){void 0,game.scale.fullScreenScaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.scale.refresh();game.add.text(15,35,instructions,{font:"1.75em Georgia",fill:"#0095DD",wordWrap:!0,wordWrapWidth:.85*game.world.width});portrait?(game.add.text(game.world.centerX,game.world.height-25,"touch the screen to continue...",{font:"1.5em Georgia",fill:"#0095DD"}).anchor.set(.5),game.input.onTap.addOnce(this.start,this)):(game.add.text(game.world.centerX,game.world.height-50,"touch the screen to continue...",{font:"1.5em Georgia",fill:"#0095DD"}).anchor.set(.5),game.input.onTap.addOnce(this.start,this))},start:function(){game.state.start("play")}},playState={create:function(){void 0,progress=0,create()},update:function(){update()}},bonusState={create:function(){void 0,void 0,game.stage.backgroundColor="#2B4970";var E,O,W=0,e=game.world.width,B=(game.world.height,game.add.text(5,5,"Points: ",{font:"3em Georgia",fill:"#ffffff"}));B.setText("Points: "+score),game.levelData=JSON.parse(game.cache.getText("leveldata"));var t=game.levelData.levelVariables[level];function r(){game.camera.fade(0,1500,!0),game.camera.onFadeComplete.add(a,this)}function a(){game.time.events.resume(),game.state.start("levelUp")}this.startTime=new Date,this.totalTime=t.bonusTime,this.timeElapsed=0,this.createTimer();var X=game.time.events.loop(100,function(){var e=new Date,t=this.startTime.getTime()-e.getTime();this.timeElapsed=Math.abs(t/1e3);var a=this.totalTime-this.timeElapsed;E=Math.floor(a/60),O=Math.floor(a)-60*E,0==Math.floor(a)&&function(){timeLabel.destroy();var e=portrait?32:64,t=game.add.bitmapText(game.world.width-5,5,"digitalFont","00:00",e);t.anchor.set(1,0),t.fill="#ffffff",G.callAll("kill"),L.callAll("kill"),deleteButton.destroy(),displaySpelling.setText(""),wordToCorrect.setText(""),promptText.setText(""),inputRectangle.destroy();var a=portrait?"3em Arial":"12em Arial";game.add.text(this.game.world.centerX,this.game.world.centerY,"TIME'S UP",{font:a,fill:"#ff0000"}).anchor.setTo(.5),game.time.events.add(3*Phaser.Timer.SECOND,r,this)}();var o=E<10?"0"+E:E;o+=O<10?":0"+O:":"+O,void 0,timeLabel.text=o},this),G=game.add.group();G.enableBody=!0;var L=game.add.group(),M=6;if(portrait)var R={font:"3.8em Arial",fill:"#000000",align:"center"},Y=(e-2*(F=.075*e))/M;else{var F;R={font:"8.5em Arial",fill:"#000000",align:"center"},Y=(e-2*(F=.2*e))/M}var H=game.world.height/6;if(portrait)var U=.8*Y/53,I=.65*H/40;else U=.85*Y/53,I=.85*H/40;!function a(){void 0,void 0;var e=clickedArray[W].text,t=e.split(""),o=clickedArray[W].answer,r=clickedArray[W].answer.split("");void 0;for(var l=t.filter(function(e){return-1==r.indexOf(e)}),n=2*M,s=unique(r.concat(l)),i=s.length,d=0;d<n-i;d++){var g=game.rnd.integerInRange(0,vowelArray.length-1),c=game.rnd.integerInRange(0,consonantArray.length-1);-1<s.indexOf(vowelArray[g])?s.push(consonantArray[c]):s.push(vowelArray[g])}var m=shuffle(s);wordToCorrect=portrait?(promptText=game.add.text(game.world.centerX,.2*game.world.height,"correct this word: ",{font:"3em Georgia",fill:"#dc9a41"}),game.add.text(game.world.centerX,.3*game.world.height,e,{font:"3.25em Georgia",fill:"#dc9a41"})):(promptText=game.add.text(game.world.centerX,.2*game.world.height,"correct this word: ",{font:"5em Georgia",fill:"#dc9a41"}),game.add.text(game.world.centerX,.3*game.world.height,e,{font:"6em Georgia",fill:"#dc9a41"})),promptText.anchor.set(.5),promptText.stroke="AA9239",promptText.strokeThickness=3,wordToCorrect.anchor.set(.5),wordToCorrect.stroke="AA9239",wordToCorrect.strokeThickness=3;for(var h=0;h<m.length;h++){var p=Math.floor(h/M),u=Math.floor(h%M)*Y+F,f=.9*game.world.height-p*H,w=game.add.sprite(u,f,"button");w.anchor.set(.5),w.inputEnabled=!0,w.data.letter=m[h],w.events.onInputDown.add(S,this),w.scale.set(U,I),G.add(w);var v=game.add.text(u,f,m[h],R);v.anchor.set(.5),L.add(v)}(deleteButton=game.add.sprite(game.world.width-F,.9*game.world.height,"deleteButton")).inputEnabled=!0,deleteButton.anchor.set(.5),deleteButton.scale.set(U,I),deleteButton.events.onInputDown.add(function(e,t){b=b.substring(0,b.length-1),displaySpelling.setText(b)},this);var y=portrait?.85*game.world.width:.65*game.world.width,x=.15*game.world.height,T=game.add.bitmapData(y,x);T.ctx.beginPath(),T.ctx.rect(0,0,y,x),T.ctx.fillStyle="#ffffff",T.ctx.fill(),(inputRectangle=game.add.sprite(game.world.centerX,game.world.centerY,T)).anchor.setTo(.5,.5);var b="";function S(e,t){if(9<b.length)return!1;b+=e.data.letter,displaySpelling.setText(b),b==o&&(void 0,function(){var e=bonusScorePool.getFirstExists();if(e)var t=e.reset(sprite.x,sprite.y);else var t=game.add.text(displaySpelling.x,displaySpelling.y,"+50",{font:"3.5em Georgia",fill:"#000000"},bonusScorePool);t.anchor.setTo(.5),t.fontWeight="bold",t.body.velocity.setTo(0,-200)}(),score+=50,B.setText("Points: "+score),W++,2===level&&W==clickedArray.length?(displaySpelling.setText(""),wordToCorrect.setText(""),promptText.setText(""),G.setAll("inputEnabled",!1),function(){game.time.events.add(3*Phaser.Timer.SECOND,D,this);var e=game.add.emitter(game.world.width-5,5,2e3);e.makeParticles("diamond"),e.minRotation=0,e.maxRotation=0,e.gravity=0,e.start(!1,1e3,15),score+=60*E+O+10,B.setText("Points: "+score),A(),game.time.events.remove(X)}()):W==clickedArray.length?(clickedArray=[],displaySpelling.setText(""),wordToCorrect.setText(""),promptText.setText(""),G.setAll("inputEnabled",!1),function(){game.time.events.add(3*Phaser.Timer.SECOND,P,this),(bonusEmitter=game.add.emitter(game.world.width-5,5,2e3)).makeParticles("diamond"),bonusEmitter.minRotation=0,bonusEmitter.maxRotation=0,bonusEmitter.gravity=0,bonusEmitter.start(!1,2500,10),score+=10*(60*E+O),B.setText("Points: "+score),A(),game.time.events.remove(X)}()):(void 0,G.callAll("kill"),void 0,L.callAll("kill"),displaySpelling.setText(""),wordToCorrect.setText(""),promptText.setText(""),a()))}function A(){timeLabel.destroy()}function P(){game.camera.fade(0,1500,!0),game.camera.onFadeComplete.add(k,this)}function k(){game.time.events.resume(),game.state.start("levelUp")}function D(){game.camera.fade(0,1500,!0),game.camera.onFadeComplete.add(C,this)}function C(){game.time.events.resume(),game.state.start("win")}(displaySpelling=portrait?game.add.text(game.world.centerX,game.world.centerY,b,{font:"4em Georgia",fill:"#000000",align:"center"}):game.add.text(game.world.centerX,game.world.centerY,b,{font:"8em Georgia",fill:"#000000",align:"center"})).anchor.set(.5),void 0,(bonusScorePool=game.add.group()).setAll("anchor.x",.5),bonusScorePool.setAll("anchor.y",.5),bonusScorePool.enableBody=!0,bonusScorePool.physicsBodytype=Phaser.Physics.ARCADE}()},createTimer:function(){var e=portrait?32:64;(timeLabel=game.add.bitmapText(game.world.width-5,5,"digitalFont","00:00",e)).anchor.setTo(1,0),timeLabel.align="center"},start:function(){game.state.start("levelUp")}},progressState={create:function(){level++,void 0,game.stage.backgroundColor=0,game.add.text(game.world.centerX,game.world.centerY,"Touch the screen to continue to the next level!!!",{font:"2.5em Georgia",fill:"#0095DD",wordWrap:!0,wordWrapWidth:.65*width}).anchor.set(.5),game.input.onTap.addOnce(this.start,this)},start:function(){game.state.start("play")}},winState={create:function(){void 0,game.stage.backgroundColor=0,game.add.text(game.world.centerX,game.world.centerY,"THAT'S ALL, YOU WIN!!!",{font:"2.5em Georgia",fill:"#0095DD",wordWrap:!0,wordWrapWidth:.65*width}).anchor.set(.5),game.add.text(game.world.centerX,game.world.centerY+.25*game.world.height,"Final Score: "+score,{font:"2.5em Georgia",fill:"#0095DD"}).anchor.set(.5),game.add.text(game.world.centerX,game.world.height-50,"Touch the screen to play again...",{font:"1.5em Georgia",fill:"#0095DD",wordWrap:!0,wordWrapWidth:.65*width}).anchor.set(.5),game.input.onTap.addOnce(this.start,this)},start:function(){score=level=0,game.state.start("play")}},loseState={create:function(){void 0,game.stage.backgroundColor=0,game.add.text(game.world.centerX,game.world.centerY,"GAME OVER",{font:"2.5em Georgia",fill:"#0095DD"}).anchor.set(.5),game.add.text(game.world.centerX,game.world.height-50,"Touch the screen to play again...",{font:"1.5em Georgia",fill:"#0095DD",wordWrap:!0,wordWrapWidth:.65*width}).anchor.set(.5),game.input.onTap.addOnce(this.start,this)},start:function(){score=level=0,game.state.start("play")}};game.state.add("boot",bootState),game.state.add("load",loadState),game.state.add("splashScreen",splashScreenState),game.state.add("instructions",instructionState),game.state.add("play",playState),game.state.add("levelUp",progressState),game.state.add("bonus",bonusState),game.state.add("win",winState),game.state.add("lose",loseState),game.state.start("boot");